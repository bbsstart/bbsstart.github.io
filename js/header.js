function search(o){$(".search-icon").css("opacity","1");var t=-1,s=0,e=userDefinedSearchData.custom?userDefinedSearchData:{thisSearch:"https://www.baidu.com/s?wd=",thisSearchIcon:"url("+o+")",hotStatus:!0,custom:!1,data:[{name:"百度",img:"url("+o+") -80px 0px",position:"0px 0px",url:"https://www.baidu.com/s?wd="},{name:"谷歌",img:"url("+o+")  -105px 0px",position:"-40px 0px",url:"https://www.google.com/search?q="},{name:"必应",img:"url("+o+")  -80px -25px",position:"0px -40px",url:"https://cn.bing.com/search?q="},{name:"好搜",img:"url("+o+") -105px -25px",position:"-40px -40px",url:"https://www.so.com/s?q="},{name:"搜狗",img:"url("+o+") -80px -50px",position:"0px -80px",url:"https://www.sogou.com/web?query="},{name:"淘宝",img:"url("+o+") -105px -50px",position:"-40px -80px",url:"https://s.taobao.com/search?q="},{name:"京东",img:"url("+o+") -80px -75px",position:"0px -120px",url:"http://search.jd.com/Search?keyword="},{name:"天猫",img:"url("+o+") -105px -75px",position:"-40px -120px",url:"https://list.tmall.com/search_product.htm?q="},{name:"1688",img:"url("+o+") -80px -100px",position:"0px -160px",url:"https://s.1688.com/selloffer/offer_search.htm?keywords="},{name:"知乎",img:"url("+o+") -105px -100px",position:"-40px -160px",url:"https://www.zhihu.com/search?type=content&q="},{name:"微博",img:"url("+o+") -80px -125px",position:"0px -200px",url:"https://s.weibo.com/weibo/"},{name:"B站",img:"url("+o+") -105px -125px",position:"-40px -200px",url:"http://search.bilibili.com/all?keyword="},{name:"豆瓣",img:"url("+o+") -80px -150px",position:"0px -240px",url:"https://www.douban.com/search?source=suggest&q="},{name:"优酷",img:"url("+o+") -105px -150px",position:"-40px -240px",url:"https://so.youku.com/search_video/q_"},{name:"GitHub",img:"url("+o+") -80px -175px",position:"0px -280px",url:"https://github.com/search?utf8=✓&q="},{name:"搜狗微信",img:"url("+o+") -80px -50px",position:"0px -80px",url:"https://weixin.sogou.com/weixin?type=2&query="}]},n=localStorage.getItem("searchData");function i(o){return $(o).contents().filter((function(o,t){return 3===t.nodeType})).text().trim()}function a(o){$.ajax({type:"GET",url:"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su",async:!0,data:{wd:o},dataType:"jsonp",jsonp:"cb",success:function(o){if($("#box ul").text(""),s=o.s.length){$("#box").css("display","block");for(var t=0;t<s;t++)$("#box ul").append("<li><span>"+(t+1)+"</span> "+o.s[t]+"</li>"),$("#box ul li").eq(t).click((function(){var o=i(this);$("#txt").val(o),window.open(e.thisSearch+o),$("#box").css("display","none")})),0===t?($("#box ul li").eq(t).css({"border-top":"none"}),$("#box ul span").eq(t).css({color:"#fff",background:"#f54545"})):1===t?$("#box ul span").eq(t).css({color:"#fff",background:"#ff8547"}):2===t&&$("#box ul span").eq(t).css({color:"#fff",background:"#ffac38"})}else $("#box").css("display","none")},error:function(o){console.log(o)}})}n&&e.custom===n.custom&&(e=JSON.parse(n)),$("#txt").keyup((function(o){if($(this).val()){if(38==o.keyCode||40==o.keyCode||!e.hotStatus)return;a($(this).val())}else $(".search-clear").css("display","none"),$("#box").css("display","none")})),$("#txt").keydown((function(o){if(40===o.keyCode){t===s-1?t=0:t++,$("#box ul li").eq(t).addClass("current").siblings().removeClass("current");var n=i($("#box ul li").eq(t));$("#txt").val(n)}if(38===o.keyCode){o.preventDefault&&o.preventDefault(),o.returnValue&&(o.returnValue=!1),0===t||-1===t?t=s-1:t--,$("#box ul li").eq(t).addClass("current").siblings().removeClass("current");n=i($("#box ul li").eq(t));$("#txt").val(n)}13===o.keyCode&&(window.open(e.thisSearch+$("#txt").val()),$("#box").css("display","none"),$("#txt").blur(),$("#box ul li").removeClass("current"),t=-1)})),$("#txt").focus((function(){$(".search-box").css("box-show","inset 0 1px 2px rgba(27,31,35,.075), 0 0 0 0.2em rgba(3,102,214,.3)"),$(this).val()&&e.hotStatus&&a($(this).val())})),$("#txt").blur((function(){setTimeout((function(){$("#box").css("display","none")}),250)}));for(var c=0;c<e.data.length;c++)$(".search-engine-list").append('<li><span style="background:'+e.data[c].img+(e.custom?" 0% 0% / cover no-repeat":"")+'"/></span>'+e.data[c].name+"</li>");$(".search-icon, .search-engine").hover((function(){$(".search-engine").css("display","block")}),(function(){$(".search-engine").css("display","none")})),$("#hot-btn").click((function(){$(this).toggleClass("off"),e.hotStatus=!e.hotStatus,localStorage.searchData=JSON.stringify(e)})),e.hotStatus?$("#hot-btn").removeClass("off"):$("#hot-btn").addClass("off"),$(".search-engine-list li").click((function(){var o=$(this).index();e.thisSearchIcon=e.custom?e.data[o].img:e.data[o].position,e.custom?$(".search-icon").css("background",e.thisSearchIcon+" no-repeat").css("background-size","cover"):$(".search-icon").css("background-position",e.thisSearchIcon),e.thisSearch=e.data[o].url,$(".search-engine").css("display","none"),localStorage.searchData=JSON.stringify(e)})),e.custom?$(".search-icon").css("background",e.thisSearchIcon+" no-repeat").css("background-size","cover"):$(".search-icon").css("background-position",e.thisSearchIcon),$("#search-btn").click((function(){var o=$("#txt").val();o?(window.open(e.thisSearch+o),$("#box ul").html("")):layer.msg("请输入关键词！",{time:500},(function(){$("#txt").focus()}))}))}function switchNightMode(){"0"==(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/,"$1")||"0")?(document.body.classList.add("night"),document.cookie="night=1;path=/"):(document.body.classList.remove("night"),document.cookie="night=0;path=/")}